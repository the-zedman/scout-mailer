<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin â€“ Scout Mailer</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <style type="text/tailwindcss">
    @theme {
      --color-brand: #2563eb;
      --color-brand-light: #3b82f6;
    }
  </style>
</head>
<body class="min-h-screen bg-slate-50 text-slate-900 antialiased">
  <header class="sticky top-0 z-10 border-b border-slate-200 bg-white/95 backdrop-blur">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-14 items-center justify-between sm:h-16">
        <a href="/" class="text-lg font-semibold text-slate-900 sm:text-xl">Scout Mailer</a>
        <nav class="flex flex-wrap items-center gap-3 sm:gap-6">
          <a href="/" class="text-sm text-slate-600 hover:text-brand sm:text-base">Home</a>
          <a href="users.html" class="text-sm font-medium text-brand sm:text-base">Users</a>
          <button type="button" id="auth-trigger" class="hidden text-sm font-medium text-brand hover:text-brand-light sm:text-base">Login</button>
          <div id="auth-logged-in" class="hidden flex items-center gap-2 rounded-lg bg-brand/10 px-3 py-1.5 sm:gap-3 sm:px-4 sm:py-2">
            <span id="auth-user" class="text-sm font-medium text-slate-700 sm:text-base"></span>
            <button type="button" id="auth-logout" class="rounded-md bg-slate-200 px-2 py-1 text-sm font-medium text-slate-700 hover:bg-slate-300 sm:px-3 sm:py-1.5 sm:text-base">Log out</button>
          </div>
        </nav>
      </div>
    </div>
  </header>

  <main class="mx-auto max-w-6xl px-4 py-8 sm:px-6 sm:py-12 lg:px-8">
    <h1 class="text-2xl font-bold text-slate-900 sm:text-3xl">Admin</h1>
    <p class="mt-2 text-slate-600 sm:text-lg">Manage Scout Mailer.</p>

    <div class="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      <a href="users.html" class="flex flex-col rounded-xl border border-slate-200 bg-white p-6 shadow-sm transition hover:border-brand hover:shadow-md focus:outline-none focus:ring-2 focus:ring-brand">
        <span class="text-3xl" aria-hidden="true">&#128101;</span>
        <h2 class="mt-3 text-lg font-semibold text-slate-900">Users</h2>
        <p class="mt-1 text-sm text-slate-600">View, edit, and delete user accounts.</p>
      </a>
    </div>
  </main>

  <script>
    (function () {
      var user = null;
      try {
        var raw = sessionStorage.getItem('scout-mailer-user');
        user = raw ? JSON.parse(raw) : null;
      } catch (_) {}
      if (!user || user.role !== 'Admin') {
        window.location.href = '/';
        return;
      }
      var authUser = document.getElementById('auth-user');
      var authBlock = document.getElementById('auth-logged-in');
      var trigger = document.getElementById('auth-trigger');
      var logoutBtn = document.getElementById('auth-logout');
      if (authUser) authUser.textContent = (user.firstName || user.email) + ' (' + (user.role || 'Author') + ')';
      if (authBlock) authBlock.classList.remove('hidden');
      if (logoutBtn) logoutBtn.addEventListener('click', function () {
        fetch('/api/logout', { method: 'POST', credentials: 'include' }).catch(function () {});
        try { sessionStorage.removeItem('scout-mailer-user'); } catch (_) {}
        window.location.href = '/';
      });
    })();
  </script>
</body>
</html>
